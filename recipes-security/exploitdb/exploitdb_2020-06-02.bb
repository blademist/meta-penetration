SUMMARY = "Exploit Database"
DESCRIPTION = "The Exploit Database is an archive of public exploits and corresponding vulnerable software, developed for use by penetration testers and vulnerability researchers."
HOMEPAGE = "https://www.exploit-db.com/"
LICENSE = "GPLv2"
LIC_FILES_CHKSUM = "file://LICENSE.md;md5=b234ee4d69f5fce4486a80fdaf4a4263"

#SRC_URI = "git://github.com/offensive-security/exploitdb.git"
#SRCREV = "b68cd4f38a9dbf2fb16c4398150a0503521fa697"
SRC_URI = "https://github.com/offensive-security/exploitdb/archive/${PV}.tar.gz"
SRC_URI[md5sum] = "e7909a1f3fddd5135e5f1d30602e9860"
SRC_URI[sha256sum] = "ac21128ca119ebd4f7148698b67c3cceefa9ab7c889af87aab7d6c406fb49d8c"

RDEPENDS_${PN} = "bash"

do_install() {
    install -d ${D}/opt
    cp -R --no-dereference --preserve=mode,links -v ${S} ${D}/opt/exploitdb
    sed 's|path_array+=(.*)|path_array+=("/opt/exploitdb")|g' ${D}/opt/exploitdb/.searchsploit_rc
    install -d ${D}${bindir}
    ln -sf /opt/exploitdb/searchsploit ${D}${bindir}/searchsploit
}

FILES_${PN} = "/opt/exploitdb \
               ${bindir} \
              "
INSANE_SKIP_${PN} += "file-rdeps"
