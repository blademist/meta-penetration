SUMMARY = "Exploit Database"
DESCRIPTION = "The Exploit Database is an archive of public exploits and corresponding vulnerable software, developed for use by penetration testers and vulnerability researchers."
HOMEPAGE = "https://www.exploit-db.com/"
LICENSE = "GPLv2"
LIC_FILES_CHKSUM = "file://LICENSE.md;md5=b234ee4d69f5fce4486a80fdaf4a4263"

#SRC_URI = "git://github.com/offensive-security/exploitdb.git"
#SRCREV = "38929aaab6c52cc053e005d62f8342b17f9a7a4c"
SRC_URI = "https://github.com/offensive-security/exploitdb/archive/${PV}.tar.gz"
SRC_URI[md5sum] = "8c2687822acff021628eef2692246850"
SRC_URI[sha256sum] = "637df659166b745b055bcd96125bdf62ed52f07532f9538ea58798c1e8fbbbcc"

RDEPENDS:${PN} = "bash"

do_install() {
    install -d ${D}/opt
    cp -R --no-dereference --preserve=mode,links -v ${S} ${D}/opt/exploitdb
    sed 's|path_array+=(.*)|path_array+=("/opt/exploitdb")|g' ${D}/opt/exploitdb/.searchsploit_rc
    install -d ${D}${bindir}
    ln -sf /opt/exploitdb/searchsploit ${D}${bindir}/searchsploit
}

FILES:${PN} = "/opt/exploitdb \
               ${bindir} \
              "
INSANE_SKIP:${PN} += "file-rdeps"
